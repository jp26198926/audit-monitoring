# Apache Configuration for Audit Monitoring System
# Add this inside your <VirtualHost *:80> block in /etc/apache2/sites-available/000-default.conf

# ============================================
# Audit Monitoring System - Reverse Proxy
# ============================================

# Main application proxy
<Location /audit-monitoring>
    ProxyPreserveHost On
    ProxyPass http://localhost:4000/audit-monitoring
    ProxyPassReverse http://localhost:4000/audit-monitoring
    
    # Optional: Add security headers
    Header always set X-Frame-Options "SAMEORIGIN"
    Header always set X-Content-Type-Options "nosniff"
    Header always set X-XSS-Protection "1; mode=block"
    
    # Allow necessary methods
    <LimitExcept GET POST PUT DELETE OPTIONS>
        Require all denied
    </LimitExcept>
</Location>

# Proxy for Next.js static files (_next folder)
<Location /audit-monitoring/_next>
    ProxyPass http://localhost:4000/audit-monitoring/_next
    ProxyPassReverse http://localhost:4000/audit-monitoring/_next
    
    # Cache static assets
    Header set Cache-Control "public, max-age=31536000, immutable"
</Location>

# WebSocket support (if needed for future features)
RewriteEngine on
RewriteCond %{HTTP:Upgrade} websocket [NC]
RewriteCond %{HTTP:Connection} upgrade [NC]
RewriteCond %{REQUEST_URI} ^/audit-monitoring [NC]
RewriteRule ^/audit-monitoring/(.*) ws://localhost:4000/audit-monitoring/$1 [P,L]

# ============================================
# End of Audit Monitoring Configuration
# ============================================

# Note: Your other application configurations go here...
